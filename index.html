<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daniel Telo | SIG y Medio Ambiente</title>
    <script src="https://cdn.tailwindcss.com">
    function filtrarCultivo() {
      const cultivoFiltro = document.getElementById("cultivoSelect").value.trim().toUpperCase();
      if (!cultivoFiltro || !recintosLayer) return;

      let ndviTotales = [];

      recintosLayer.eachLayer(layer => {
        const props = layer.feature.properties;
        const cdUso = (props["RecintosFiltrados.CD_USO"] || "").toUpperCase();
const cultivo = {
  "FS": "Frutos secos",
  "FY": "Frutales",
  "OV": "Olivar",
  "TA": "Tierras arables"
}[cdUso] || cdUso;


        if (!layer._clickHandler) {
          // guardar handler original si no existe
          const clickHandler = function () {
            const props = layer.feature.properties;
            const id = props["RecintosFiltrados.ID_RECINTO"];
            const cultivo = props["RecintosFiltrados.CD_USO"] || "Desconocido";
            const fecha = document.getElementById("ndviSelect").value;
            const ndviField = {
              abril: "ZonalSt_22_04.MEAN",
              mayo: "ZonalSt_22_05.MEAN",
              junio: "ZonalSt_16_06.MEAN",
              julio: "ZonalSt_16_07.MEAN",
              agosto: "ZonalSt_10_08.MEAN"
            }[fecha];
            const ndvi = props[ndviField];
            const ndviStr = ndvi !== undefined ? ndvi.toFixed(3) : "N/A";
            const ndviVals = ndviFields.map(f => props[f]);

            const ndviValidos = ndviVals.filter(v => typeof v === "number");
            const media = ndviValidos.reduce((a, b) => a + b, 0) / ndviValidos.length;
            const max = Math.max(...ndviValidos);
            const min = Math.min(...ndviValidos);
            const std = Math.sqrt(ndviValidos.reduce((a, b) => a + Math.pow(b - media, 2), 0) / ndviValidos.length);
            const tendencia = ndviValidos[ndviValidos.length - 1] - ndviValidos[0];

            const html = `
              <h3>Recinto ${id}</h3>
              <p><strong>Cultivo:</strong> ${cultivo}</p>
              <p><strong>NDVI (${fecha}):</strong> ${ndviStr}</p>
              <h4 style="margin-top: 1em;">üìä Estad√≠sticas NDVI</h4>
              <ul>
                <li><strong>Media:</strong> ${media.toFixed(3)}</li>
                <li><strong>M√≠nimo:</strong> ${min.toFixed(3)}</li>
                <li><strong>M√°ximo:</strong> ${max.toFixed(3)}</li>
                <li><strong>Desviaci√≥n t√≠pica:</strong> ${std.toFixed(3)}</li>
                <li><strong>Tendencia:</strong> ${tendencia > 0.01 ? '‚Üë Positiva' : tendencia < -0.01 ? '‚Üì Negativa' : '‚Üí Estable'} (${tendencia.toFixed(3)})</li>
              </ul>
              <img src="ndvi_graficas/${id}.png" alt="NDVI ${id}">
            `;
            document.getElementById("infoContent").innerHTML = html;
            document.getElementById("infoPanel").style.display = "block";
            map.fitBounds(layer.getBounds(), { paddingRightTop: [300, 0] });
          };
          layer._clickHandler = clickHandler;
        }

        if (cultivo === cultivoFiltro) {
          layer.setStyle({ fillOpacity: 0.3, color: "#66ccff" });
          layer.on("click", layer._clickHandler);
          const ndviVals = ndviFields.map(f => props[f]).filter(v => typeof v === "number");
          ndviTotales.push(...ndviVals);
        } else {
          layer.setStyle({ fillOpacity: 0.05, color: "#333" });
          layer.off("click");
        }
      });

      if (ndviTotales.length > 0) {
        const media = ndviTotales.reduce((a,b) => a + b, 0) / ndviTotales.length;
        const min = Math.min(...ndviTotales);
        const max = Math.max(...ndviTotales);
        const std = Math.sqrt(ndviTotales.reduce((a,b) => a + Math.pow(b - media, 2), 0) / ndviTotales.length);

        alert(`üìä Estad√≠sticas NDVI para ${cultivoFiltro}:
Media: ${media.toFixed(3)}
M√°ximo: ${max.toFixed(3)}
M√≠nimo: ${min.toFixed(3)}
Desviaci√≥n: ${std.toFixed(3)}`);
      } else {
        alert("No se encontraron parcelas con ese cultivo.");
      }
    }

    function quitarFiltro() {
      if (!recintosLayer) return;
      recintosLayer.eachLayer(layer => {
        layer.setStyle({ fillOpacity: 0, color: "#66ccff" });
        if (layer._clickHandler) {
          layer.on("click", layer._clickHandler);
        }
      });
    }
</script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }
    </style>
  </head>
  <body class="bg-zinc-900 text-white">
    <!-- Header -->
    <header class="fixed top-0 left-0 w-full bg-zinc-950 shadow z-50">
      <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
        <h1 class="text-xl font-bold text-green-500">Daniel Telo</h1>
        <nav class="space-x-6 text-sm font-medium">
          <a href="#inicio" class="hover:text-green-400">Inicio</a>
          <a href="#sobremi" class="hover:text-green-400">Sobre m√≠</a>
          <a href="#proyectos" class="hover:text-green-400">Proyectos</a>
          <a href="#contacto" class="hover:text-green-400">Contacto</a>
        </nav>
      </div>
    </header>

    <!-- Hero Section -->
    <section id="inicio" class="h-screen bg-cover bg-center relative flex items-center justify-center text-white" style="background-image: url('hero-banner.png'); background-size: cover; background-position: center;">
      <div class="absolute inset-0 bg-black opacity-60"></div>
      <div class="relative z-10 text-center px-6">
        <h2 class="text-4xl md:text-5xl font-bold mb-4">Datos para entender el territorio</h2>
        <p class="text-lg max-w-2xl mx-auto">SIG ¬∑ NDVI ¬∑ Medio Ambiente ¬∑ Python ¬∑ SQL</p>
      </div>
    </section>

    <!-- Sobre m√≠ en formato rejilla vertical -->
    <section id="sobremi" class="py-24 px-6 bg-zinc-900">
      <div class="max-w-6xl mx-auto">
        <h3 class="text-3xl font-semibold mb-10 text-center text-green-400">Sobre m√≠</h3>
        <div class="grid gap-10">

          <!-- Bloque 1 -->
	<div class="grid md:grid-cols-2 gap-6 items-center">
  		<div>
  	  <h4 class="text-green-400 font-semibold text-xl mb-2">Estudiante de Ingenier√≠a Agroambiental</h4>
	    <p class="text-gray-300 text-sm">Formaci√≥n en medio ambiente y tecnolog√≠as aplicadas al territorio.</p>
	  </div>
	  <img src="ingenieria-agroambiental.png" alt="Bombilla con planta en entorno degradado"
 	   class="w-[100%] max-w-none h-auto rounded-lg shadow-lg object-cover ml-auto" />
	</div>


          <!-- Bloque 2 -->
	<div class="grid md:grid-cols-2 gap-6 items-center">
 	 <img src="sig-cartografia.png" alt="An√°lisis SIG, cartograf√≠a y teledetecci√≥n"
  	  class="w-[100%] max-w-none h-auto rounded-lg shadow-lg object-cover mr-auto" />
 	 <div>
 	   <h4 class="text-green-400 font-semibold text-xl mb-2">SIG y an√°lisis espacial</h4>
 	   <p class="text-gray-300 text-sm">Gran inter√©s por la cartograf√≠a, teledetecci√≥n y visualizaci√≥n de datos geogr√°ficos.</p>
 	 </div>
	</div>


          <!-- Bloque 3 -->
	<div class="grid md:grid-cols-2 gap-6 items-center">
 	 <div>
 	   <h4 class="text-green-400 font-semibold text-xl mb-2">Desarrollo sostenible</h4>
 	   <p class="text-gray-300 text-sm">Comprometido con soluciones ambientales equilibradas y eficientes.</p>
	  </div>
 	 <img src="desarrollo-sostenible.png" alt="Placas solares y cabras pastando - desarrollo sostenible"
 	   class="w-[100%] max-w-none h-auto rounded-lg shadow-lg object-cover ml-auto" />
	</div>


          <!-- Bloque 4 -->
	<div class="grid md:grid-cols-2 gap-6 items-center">
  	<img src="python-sql.png" alt="C√≥digo Python y SQL en pantalla"
  	  class="w-[100%] max-w-none h-auto rounded-lg shadow-lg object-cover mr-auto" />
 	 <div>
 	   <h4 class="text-green-400 font-semibold text-xl mb-2">Python y SQL</h4>
 	   <p class="text-gray-300 text-sm">Conocimientos aplicados a automatizaci√≥n y an√°lisis de datos espaciales.</p>
	  </div>
	</div>


          <!-- Bloque 5 -->
	<div class="grid md:grid-cols-2 gap-6 items-center">
	  <div>
	    <h4 class="text-green-400 font-semibold text-xl mb-2">Resoluci√≥n de problemas</h4>
	    <p class="text-gray-300 text-sm">Perfil anal√≠tico, proactivo y con orientaci√≥n a resultados.</p>
	  </div>
 	 <img src="resolucion-problemas.png" alt="Espacio de trabajo con terminales y an√°lisis de datos"
 	   class="w-[100%] max-w-none h-auto rounded-lg shadow-lg object-cover ml-auto" />
	</div>
        </div>
      </div>
    </section>

    <!-- Proyectos destacados -->
    <section id="proyectos" class="py-24 px-6 bg-zinc-950">
      <div class="max-w-5xl mx-auto text-center">
        <h3 class="text-3xl font-semibold mb-10 text-green-400">Proyectos destacados</h3>
        <div class="grid md:grid-cols-2 gap-8">
          <div class="bg-zinc-800 border border-zinc-700 rounded-lg shadow p-6 text-left">
            <h4 class="text-xl font-bold mb-2 text-white">NDVI de Baena (C√≥rdoba)</h4>
            <p class="text-gray-400 mb-4">An√°lisis del √≠ndice de vegetaci√≥n con datos satelitales y visor interactivo Leaflet.</p>
            <a href="https://danieltelof.github.io/portfolio/" target="_blank" class="inline-block mt-2 text-white bg-green-600 hover:bg-green-700 px-4 py-2 rounded transition">Ver visor</a>
          </div>
          <div class="bg-zinc-800 border border-zinc-700 rounded-lg shadow p-6 text-left flex items-center justify-center text-gray-500 italic">
            Pr√≥ximamente
          </div>
        </div>
      </div>
    </section>

    <!-- Contacto -->
    <section id="contacto" class="py-24 px-6 bg-zinc-900">
      <div class="max-w-3xl mx-auto text-center">
        <h3 class="text-3xl font-semibold mb-6 text-green-400">Contacto</h3>
        <p class="text-gray-300 text-lg mb-2">üìß Email: <a href="mailto:Danieltelof@gmail.com" class="text-green-400 hover:underline">Danieltelof@gmail.com</a></p>
        <p class="text-gray-300 text-lg">üîó LinkedIn: <a href="https://www.linkedin.com/in/daniel-telo-fernandez/" target="_blank" rel="noopener noreferrer" class="text-green-400 hover:underline">daniel-telo-fernandez</a></p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="text-center py-6 text-sm text-gray-500 border-t border-zinc-800">
      &copy; 2025 Daniel Telo. Todos los derechos reservados.
    </footer>
  </body>
</html>
